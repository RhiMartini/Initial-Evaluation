
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subjective Evaluation Form</title>
  <style>
    body {
      max-width: 900px;
      margin: auto;
      font-family: sans-serif;
    }
    h2, h3 {
      background-color: #d4edda;
      border-left: 6px solid #2e7d32;
      padding: 8px 12px;
    }
    h3 {
      color: green;
      border-bottom: 2px solid #2196F3;
      background-color: unset;
      border-left: none;
    }
    .grid-4col, .grid-3col {
      display: grid;
      gap: 10px;
    }
    .grid-4col {
      grid-template-columns: repeat(4, 1fr);
    }
    .grid-3col {
      grid-template-columns: repeat(3, 1fr);
    }
    #motionsAffecting > div,
    #adlsAffecting > div {
      display: flex;
      flex-direction: column;
    }
    .detailInput {
      display: none;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<h2>Initial Evaluation â€“ Subjective Section</h2>

<!-- ... truncated for brevity, assume full form content is present ... -->

<script>
function toggleDetailInput(button) {
  const detailDiv = button.parentElement.querySelector('.detailInput');
  if (detailDiv) {
    detailDiv.style.display = detailDiv.style.display === 'none' ? 'block' : 'none';
  }
}

function copyToClipboard() {
  const output = [];

  const rxChecked = Array.from(document.querySelectorAll('#rxBodyParts input[type=checkbox]:checked')).map(cb => {
    const label = cb.nextSibling.textContent.trim();
    const side = cb.parentElement.querySelector('select')?.value || '';
    return side ? `${side} ${label}` : label;
  });
  output.push("The patient has an Rx for the following body parts:");
  rxChecked.forEach(part => output.push(` - ${part}`));
  output.push("\n");

  const hadMassage = document.querySelector('input[name=hadMassage]:checked')?.value;
  const newClient = document.querySelector('input[name=newClient]:checked')?.value;
  if (hadMassage === 'Yes') output.push("The patient has had a professional massage before.");
  if (newClient === 'Yes') output.push("The patient is new to CMT and has had pain numbers, trigger points, communication expectations, and treatment plans for this session explained to them");
  output.push("\nThe patient reports the following:\n\n_____________________________________________\n\nINJURY REPORT\n\n_____________________________________________\n");

  output.push("1. Date injury occurred:\n" + (document.getElementById("injuryDate")?.value || ''));
  output.push("2. Details of how the injury occurred:\n" + (document.getElementById("injuryDetails")?.value || ''));

  const treatments = Array.from(document.querySelectorAll('#treatmentList input')).map(el => el.value.trim()).filter(Boolean);
  if (treatments.length) {
    output.push("3. Other treatments received for this injury:");
    treatments.forEach(t => output.push("-" + t));
  }

  const effectiveness = document.getElementById("treatmentEffectiveness")?.value;
  if (effectiveness) output.push("4. Effectiveness of other treatments received:\n- " + effectiveness);

  const meds = Array.from(document.querySelectorAll('#medList input')).map(el => el.value.trim()).filter(Boolean);
  if (meds.length) {
    output.push("5. Medications prescribed for injury:");
    meds.forEach(m => output.push("-" + m));
  }

  output.push("\n_____________________________________________\n\nPAIN REPORT\n\n_____________________________________________\n");
  output.push("1. Patient reports pain in the following prescribed body parts on a scale of 1-10/10:");
  document.querySelectorAll('#painReportTable tr').forEach((tr, i) => {
    if (i === 0) return;
    const part = tr.children[0].innerText;
    const level = tr.children[1].querySelector('select').value;
    output.push("-" + part + " " + level + "/10");
  });

  output.push("2. Patient reports pain is improved when:\n- ");
  output.push("3. Patient reports pain worsens when:\n- ");

  output.push("\n_____________________________________________\n\nSLEEP REPORT\n\n_____________________________________________\n");
  output.push("1. Total number of hours patient reports sleeping each night:\n- " + (document.getElementById("sleepHours")?.value || ''));
  output.push("2. Total number of times the patient reports waking due to pain each night:\n- " + (document.getElementById("wakeUps")?.value || ''));
  output.push("3. Position patient reports sleeping in prior to injury and after injury:\n- Prior to injury: " + (document.getElementById("sleepBefore")?.value || '') + "\n- After injury: " + (document.getElementById("sleepAfter")?.value || ''));

  output.push("\n_____________________________________________\n\nMOTIONS THAT AFFECT ACTIVITIES OF DAILY LIVING\n\n_____________________________________________\n");
  output.push("1. The patient reports difficulty with the following motions:\n");
  document.querySelectorAll('#motionsAffecting > div').forEach(div => {
    const cb = div.querySelector('input[type=checkbox]');
    const txt = div.querySelector('input[type=text]')?.value;
    output.push(`[ ${cb.checked ? 'x' : ' '} ] ${cb.value}${txt ? '  ' + txt : ''}`);
  });

  output.push("\n_____________________________________________\n\nACTIVITIES OF DAILY LIVING AFFECTED BY PAIN\n\n_____________________________________________\n");
  output.push("1. The patient reports the following ADLs are affected:\n");
  document.querySelectorAll('#adlsAffecting > div').forEach(div => {
    const cb = div.querySelector('input[type=checkbox]');
    const txt = div.querySelector('input[type=text]')?.value;
    output.push(`[ ${cb.checked ? 'x' : ' '} ] ${cb.value}${txt ? '  ' + txt : ''}`);
  });

  const workStatus = document.querySelector('input[name=workStatus]:checked')?.parentElement.innerText.trim();
  if (workStatus) output.push("2. Patient reports current work status as:\n- " + workStatus);

  const selfCare = document.getElementById('selfCare')?.value;
  if (selfCare) output.push("3. Patient reports performing the following self-care tasks at home:\n- " + selfCare);

  const additional = document.getElementById('additionalReporting')?.value;
  if (additional) output.push("-Additional reporting here:\n-" + additional);

  const text = document.createElement('textarea');
  text.style.position = 'absolute';
  text.style.left = '-9999px';
  text.value = output.join("\n");
  document.body.appendChild(text);
  text.select();
  document.execCommand('copy');
  document.body.removeChild(text);
  alert('Subjective Section copied to clipboard in formatted style.');
}
</script>

</body>
</html>
